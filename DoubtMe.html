<head>
  <title>DoubtMe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
</head>

<body>
  {{> nav}}
  <div class ="row-fluid">
    <div class="span12" >
  {{> forms}}
  {{> feed}}
  </div>
  </div>
</body>
<template name = "nav">
<div class="navbar navbar-static-top navbar-inverse">
  <div class="navbar-inner">
    <a class="brand" href="#">DoubtMe</a>
    <ul class="nav pull-right hidden-phone">
      <li>
        <a>{{greeting}}</a>
      </li>
    </ul>
  </div>
</div>
</template>
<template  name = "forms">
{{#if showForms}}
{{>login}}
{{>register}}
{{/if}}
</template>
<template name="login">
    <h1>Login</h1>
    <form id="login-form" class="form-inline" >
      <div>
        <input type="email" id="login-email" />
        <input type="password" id="login-password" />
      </div>
      <div class="center">
        <button type="submit" class="btn">Sign in</button>
      </div>
    </form>
</template>

<template name="feed">
{{#if showButtons}}
{{#if showCreateDialog}}
{{> createDialog}}
{{/if}}
{{#if showLeaderboardModal}}
  {{> showLeaderboard}}
{{/if}}
<a class="btn show_leaderboard"> Show Leaderboard</a>
<a class="btn add_goal">Add Goal</a>
<a class="btn logout">Logout</a>
{{/if}}
{{#each goals}}
{{> goal}}
{{/each}}
</template>
<template name="goal">
<div class="goal well well-small">
  <div class="creator muted">{{creator}}</div>
  <h3>
    {{title}}
  </h3>
  <h5>
    Points for Doubting: {{points_per_person}}
  </h5>
  <p>{{description}}</p>
  {{#if showPayButtons}}
    <a class="btn btn-primary success">!@#$ the haters</a>
    <a class="btn btn-primary failure">):</a>
  {{ else }}
    <a class="btn btn-primary doubt">Doubt This</a>
  {{/if}}
  {{goal_doubters}}
</div>
</template>

<template name="createDialog">
<div class="modal">
  <div class="modal-header">
    <button type="button" class="close cancel">&times;</button>
    <h3>Add Goal</h3>
  </div>

  <div class="modal-body">
    {{#if error}}
    <div class="alert alert-error">{{error}}</div>
    {{/if}}

    <label>Goal</label>
    <input type="text" class="title span5" id="add_title">
    <label>Points Per Doubter</label>
    <input type="text" class="points_per_person span5" id="add_points_per">
    <label>Description</label>
    <textarea class="description span5" id="add_desc"></textarea>
  </div>

  <div class="modal-footer">
    <a href="#" class="btn cancel">Cancel</a>
    <a href="#" class="btn btn-primary save">Add Goal</a>
  </div>
</div>
</template>

<template name="showLeaderboard">
<div class="modal">
  <div class="modal-header">
    <button type="button" class="close cancel">&times;</button>
    <h3>Leaderboard</h3>
  </div>

  <div class="modal-body">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Name</th>
          <th style="width: 60px">Score</th>
          <th style="width: 20px">Challenge</th>
        </tr>
      </thead>
      <tbody>
        {{#each allUsers}}
          {{> user}}
        {{/each}}
      </tbody>
    </table>
  </div>
</div>
</template>


<template name="register">
    <h1>Register</h1>
    <form id="register-form" class="form-inline">
      <div>
        <input type="email" id="account-email" />
        <input type="password" id="account-password" />
      </div>
      <div class="center">
        <button type="submit" class="btn">Register</button>
      </div>
    </form>
</template>

<template name="user">
<tr>
  <td class="name">{{email_address}}</td>
  <td class="score">{{points}}</td>
  <td class="challenge"></td>
</tr>
</template>
